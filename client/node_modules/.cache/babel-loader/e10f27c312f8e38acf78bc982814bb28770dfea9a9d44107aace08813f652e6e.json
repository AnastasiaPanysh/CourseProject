{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nexport function useUserStorage() {\n  _s();\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [accessToken, setAccessToken] = useState('');\n  const [expirationTime, setExpirationTime] = useState('');\n  const [refreshToken, setRefreshToken] = useState('');\n  useEffect(() => {\n    // При монтировании компонента, попробуйте загрузить данные из куков\n    const savedName = Cookies.get('name');\n    const savedEmail = Cookies.get('email');\n    const savedAccessToken = Cookies.get('accessToken');\n    const savedExpirationTime = Cookies.get('expirationTime');\n    const savedRefreshToken = Cookies.get('refreshToken');\n    if (savedName && savedEmail && savedAccessToken && savedExpirationTime && savedRefreshToken) {\n      setName(savedName);\n      setEmail(savedEmail);\n      setAccessToken(savedAccessToken);\n      setExpirationTime(savedExpirationTime);\n      setRefreshToken(savedRefreshToken);\n    }\n  }, []);\n  const handleLogin = newUser => {\n    setName(newUser.name);\n    setEmail(newUser.email);\n    setAccessToken(newUser.accessToken);\n    setExpirationTime(newUser.expirationTime);\n    setRefreshToken(newUser.refreshToken);\n    console.log(name, email, accessToken, expirationTime, refreshToken);\n    Cookies.set('name', newUser.name);\n    Cookies.set('email', newUser.email);\n    Cookies.set('accessToken', newUser.accessToken);\n    Cookies.set('expirationTime', newUser.expirationTime);\n    Cookies.set('refreshToken', newUser.refreshToken);\n  };\n  const handleLogout = () => {\n    setName('');\n    setEmail('');\n    setAccessToken('');\n    setExpirationTime('');\n    setRefreshToken('');\n    Cookies.remove('name');\n    Cookies.remove('email');\n    Cookies.remove('accessToken');\n    Cookies.remove('expirationTime');\n    Cookies.remove('refreshToken');\n  };\n  return {\n    name,\n    email,\n    accessToken,\n    expirationTime,\n    refreshToken,\n    handleLogin,\n    handleLogout\n  };\n}\n_s(useUserStorage, \"OvW5262qRFK8sKc8GLHPMyMmIM4=\");","map":{"version":3,"names":["useState","useEffect","Cookies","useUserStorage","_s","name","setName","email","setEmail","accessToken","setAccessToken","expirationTime","setExpirationTime","refreshToken","setRefreshToken","savedName","get","savedEmail","savedAccessToken","savedExpirationTime","savedRefreshToken","handleLogin","newUser","console","log","set","handleLogout","remove"],"sources":["C:/Users/Nasty/Desktop/courseProject/client/src/storage/userStorage.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport Cookies from 'js-cookie';\r\n\r\ninterface User {\r\n    name: string;\r\n    email: string;\r\n    accessToken: string,\r\n    expirationTime: string,\r\n    refreshToken: string\r\n}\r\n\r\nexport function useUserStorage() {\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [accessToken, setAccessToken] = useState('');\r\n    const [expirationTime, setExpirationTime] = useState('');\r\n    const [refreshToken, setRefreshToken] = useState('');\r\n\r\n    useEffect(() => {\r\n        // При монтировании компонента, попробуйте загрузить данные из куков\r\n        const savedName = Cookies.get('name');\r\n        const savedEmail = Cookies.get('email');\r\n        const savedAccessToken = Cookies.get('accessToken');\r\n        const savedExpirationTime = Cookies.get('expirationTime');\r\n        const savedRefreshToken = Cookies.get('refreshToken');\r\n        if (savedName && savedEmail && savedAccessToken && savedExpirationTime && savedRefreshToken) {\r\n            setName(savedName);\r\n            setEmail(savedEmail);\r\n            setAccessToken(savedAccessToken);\r\n            setExpirationTime(savedExpirationTime);\r\n            setRefreshToken(savedRefreshToken);\r\n        }\r\n\r\n    }, []);\r\n\r\n    const handleLogin = (newUser: User) => {\r\n\r\n        setName(newUser.name);\r\n        setEmail(newUser.email);\r\n        setAccessToken(newUser.accessToken);\r\n        setExpirationTime(newUser.expirationTime);\r\n        setRefreshToken(newUser.refreshToken);\r\n\r\n        console.log(name, email, accessToken, expirationTime, refreshToken);\r\n\r\n        Cookies.set('name', newUser.name);\r\n        Cookies.set('email', newUser.email);\r\n        Cookies.set('accessToken', newUser.accessToken);\r\n        Cookies.set('expirationTime', newUser.expirationTime);\r\n        Cookies.set('refreshToken', newUser.refreshToken);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        setName('');\r\n        setEmail('');\r\n        setAccessToken('');\r\n        setExpirationTime('');\r\n        setRefreshToken('');\r\n        Cookies.remove('name');\r\n        Cookies.remove('email');\r\n        Cookies.remove('accessToken');\r\n        Cookies.remove('expirationTime');\r\n        Cookies.remove('refreshToken');\r\n    };\r\n\r\n    return {\r\n        name,\r\n        email,\r\n        accessToken,\r\n        expirationTime,\r\n        refreshToken,\r\n        handleLogin,\r\n        handleLogout\r\n    };\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}